#ifndef __SPI_H
#define __SPI_H

#include "version.h"

#define DELAY_TIME      10

#define SPI_DELAY()
//static __INLINE void SPI_DELAY(){ uint16_t k=0; for( ; k <= DELAY_TIME; k++ );}

#define SPI_IRQ_PORT            GPIOD
#define SPI_IRQ_PIN             GPIO_Pin_8
#define SPI_IRQ_MODE            GPIO_Mode_IPU

#define SPI_CEN_PORT            GPIOD
#define SPI_CEN_PIN             GPIO_Pin_9
#define SPI_CEN_MODE            GPIO_Mode_Out_PP

// SPI2 PB 12 13 14 15
#define SPI_CSN_PORT        GPIOB
#define SPI_CSN_PIN         GPIO_Pin_12
#define SPI_CSN_MODE        GPIO_Mode_Out_PP    //此处一定要PP输出否则程序不正常

#define SPI_CLK_PORT        GPIOB
#define SPI_CLK_PIN         GPIO_Pin_13
#define SPI_CLK_MODE        GPIO_Mode_Out_PP

#define SPI_MISO_PORT       GPIOB
#define SPI_MISO_PIN        GPIO_Pin_14
#define SPI_MISO_MODE       GPIO_Mode_IPU

#define SPI_MOSI_PORT       GPIOB
#define SPI_MOSI_PIN        GPIO_Pin_15
#define SPI_MOSI_MODE       GPIO_Mode_Out_PP

//#define SPI_CEN_HIGH()      GPIO_SetBits(SPI_CEN_PORT, SPI_CEN_PIN)
//#define SPI_CEN_LOW()       GPIO_ResetBits(SPI_CEN_PORT, SPI_CEN_PIN)
//#define SPI_CEN(x)          x ? GPIO_SetBits(SPI_CEN_PORT,SPI_CEN_PIN): GPIO_ResetBits(SPI_CEN_PORT,SPI_CEN_PIN)

//#define SPI_CSN_HIGH()      GPIO_SetBits(SPI_CSN_PORT, SPI_CSN_PIN)
//#define SPI_CSN_LOW()       GPIO_ResetBits(SPI_CSN_PORT, SPI_CSN_PIN)
//#define SPI_CSN(x)          x ? GPIO_SetBits(SPI_CSN_PORT,SPI_CSN_PIN): GPIO_ResetBits(SPI_CSN_PORT,SPI_CSN_PIN)

#define SPI_CLK_HIGH()      GPIO_SetBits(SPI_CLK_PORT, SPI_CLK_PIN)
#define SPI_CLK_LOW()       GPIO_ResetBits(SPI_CLK_PORT, SPI_CLK_PIN)
#define SPI_CLK(x)          x ? GPIO_SetBits(SPI_CLK_PORT,SPI_CLK_PIN): GPIO_ResetBits(SPI_CLK_PORT,SPI_CLK_PIN)

#define SPI_MOSI_HIGH()     GPIO_SetBits(SPI_MOSI_PORT, SPI_MOSI_PIN)
#define SPI_MOSI_LOW()      GPIO_ResetBits(SPI_MOSI_PORT, SPI_MOSI_PIN)
#define SPI_MOSI(x)         x ? GPIO_SetBits(SPI_MOSI_PORT,SPI_MOSI_PIN): GPIO_ResetBits(SPI_MOSI_PORT,SPI_MOSI_PIN)

#define SPI_MISO_READ()     GPIO_ReadInputDataBit(SPI_MISO_PORT, SPI_MISO_PIN)

//#define SPI_IRQ_READ()      GPIO_ReadInputDataBit(SPI_IRQ_PORT, SPI_IRQ_PIN)

static __INLINE void SPI_CEN_HIGH(){GPIO_SetBits(SPI_CEN_PORT, SPI_CEN_PIN);}
static __INLINE void SPI_CEN_LOW() {GPIO_ResetBits(SPI_CEN_PORT, SPI_CEN_PIN);}
static __INLINE void SPI_CSN_HIGH(){GPIO_SetBits(SPI_CSN_PORT, SPI_CSN_PIN);}
static __INLINE void SPI_CSN_LOW() {
GPIO_ResetBits(SPI_CSN_PORT, SPI_CSN_PIN);}

//static __INLINE void SPI_CLK_HIGH(){GPIO_SetBits(SPI_CLK_PORT, SPI_CLK_PIN);}
//static __INLINE void SPI_CLK_LOW() {GPIO_ResetBits(SPI_CLK_PORT, SPI_CLK_PIN);}
//static __INLINE void SPI_MOSI_HIGH(){GPIO_SetBits(SPI_MOSI_PORT, SPI_MOSI_PIN);}
//static __INLINE void SPI_MOSI_LOW() {GPIO_ResetBits(SPI_MOSI_PORT, SPI_MOSI_PIN);}

//static __INLINE uint8_t SPI_MISO_READ(){return GPIO_ReadInputDataBit(SPI_MISO_PORT, SPI_MISO_PIN);}

static __INLINE uint8_t SPI_IRQ_READ(){ return GPIO_ReadInputDataBit(SPI_IRQ_PORT, SPI_IRQ_PIN);}


extern void SPI_INIT( void );
extern uint8_t SPI_ReadWrite(uint8_t data);
#endif

